exports.id=321,exports.ids=[321],exports.modules={8168:a=>{a.exports={rechartTooltip:"month-on-month-chart_rechartTooltip__LmjTo",rechartTooltipLabel:"month-on-month-chart_rechartTooltipLabel__l3FpE",rechartTooltipValue:"month-on-month-chart_rechartTooltipValue__bL9w_"}},15209:(a,b,c)=>{"use strict";c.d(b,{Z:()=>k});var d=c(13486),e=c(60159),f=c(77449),g=c(98116),h=c(2984),i=c(59594),j=c.n(i);let k=({transactions:a,currency:b,maxItems:c=3,showSeeMore:i=!0})=>{let k=(0,h.useParams)().customerId,l=(0,e.useMemo)(()=>{let b=(a=>{let b=a.filter(a=>"expense"===a.type),c=new Map;b.forEach(a=>{let b=a.narration.toLowerCase().replace(/\d+/g,"").replace(/[^\w\s]/g,"").trim();b.length>3&&(c.has(b)||c.set(b,[]),c.get(b).push({date:a.date,amount:a.numericAmount,narration:a.narration}))});let d=[];return c.forEach((a,b)=>{if(a.length>=2){a.sort((a,b)=>a.date.getTime()-b.date.getTime());let c=(a=>{let b=[];for(let c=1;c<a.length;c++){let d=Math.round((a[c].date.getTime()-a[c-1].date.getTime())/864e5);b.push(d)}return b})(a),e=c.reduce((a,b)=>a+b,0)/c.length;if(c.every(a=>7>=Math.abs(a-e))&&e>=7&&e<=365){let c=a[a.length-1],g=a.reduce((a,b)=>a+b.amount,0)/a.length,h=(0,f.Y)(c.narration),i=new Date(c.date.getTime()+24*e*36e5);d.push({pattern:b.split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "),category:h,averageAmount:g,count:a.length,intervalDays:Math.round(e),lastPayment:c.date,nextPayment:i,transactions:a})}}}),d.sort((a,b)=>a.nextPayment.getTime()-b.nextPayment.getTime())})(a),c=new Date;c.setHours(0,0,0,0);let d=[],e=[];return b.forEach(a=>{let b=new Date(a.nextPayment);b.setHours(0,0,0,0),b.getTime()<c.getTime()?d.push(a):e.push(a)}),[...d.slice(0,1),...e]},[a]);return 0===l.length?(0,d.jsxs)("div",{className:j().emptyState,children:[(0,d.jsx)("div",{className:j().emptyStateIcon,children:"\uD83D\uDD04"}),(0,d.jsx)("p",{children:"No recurring payments detected"})]}):(0,d.jsxs)("div",{className:j().container,children:[l.slice(0,c).map((a,c)=>{let e=(a=>{let b=new Date;b.setHours(0,0,0,0);let c=new Date(a);c.setHours(0,0,0,0);let d=Math.ceil((c.getTime()-b.getTime())/864e5);return 0===d?"Today":1===d?"in 1 day":d<0?"Overdue":`in ${d} days`})(a.nextPayment),f=a.nextPayment.toLocaleDateString("en-GB",{day:"numeric",month:"long"});return(0,d.jsxs)("div",{className:j().recurringItem,children:[(0,d.jsxs)("div",{className:j().recurringItemLeft,children:[(0,d.jsx)("div",{className:j().categoryIcon,children:"utilities"===a.category?"⚡":"housing"===a.category?"\uD83C\uDFE0":"transport"===a.category?"\uD83D\uDE97":"entertainment"===a.category?"\uD83C\uDFAE":"\uD83D\uDCB3"}),(0,d.jsxs)("div",{className:j().itemDetails,children:[(0,d.jsx)("span",{className:j().itemName,children:a.pattern}),(0,d.jsxs)("span",{className:j().itemFrequency,children:["Every ",a.intervalDays," days"]})]})]}),(0,d.jsxs)("div",{className:j().recurringItemRight,children:[(0,d.jsx)("span",{className:j().itemAmount,children:(0,g.v)(a.averageAmount,b)}),(0,d.jsxs)("span",{className:j().itemDate,children:[f,", ",e]})]})]},`${a.pattern}-${c}`)}),i&&l.length>c&&(0,d.jsxs)("div",{className:j().seeMore,onClick:()=>(0,h.redirect)(`/${k}/analytics`),children:["+",l.length-c," more in Analytics"]})]})}},52030:(a,b,c)=>{"use strict";c.d(b,{Z5:()=>f});var d=c(12518);function e(a){return function a(b){if(null==b||"string"==typeof b||"number"==typeof b||"boolean"==typeof b)return b;if(b instanceof Date)return b.toISOString();if("undefined"!=typeof Buffer&&Buffer.isBuffer(b))return b.toString("base64");if(b&&"object"==typeof b&&b.buffer instanceof ArrayBuffer)try{return Buffer.from(b.buffer).toString("base64")}catch{}if(b instanceof d.ObjectId||b?._bsontype==="ObjectID"||b?.constructor?.name==="ObjectId")return b.toString();if(b instanceof d.Decimal128||b?.constructor?.name==="Decimal128"||b?._bsontype==="Decimal128")try{return b.toString()}catch{return String(b)}if(b instanceof d.Long||b?.constructor?.name==="Long"||b?._bsontype==="Long")try{return b.toString()}catch{return Number(b)}if(b instanceof d.Binary||b?.constructor?.name==="Binary"||b?._bsontype==="Binary")try{return Buffer.from(b.buffer).toString("base64")}catch{return null}if(b instanceof d.Timestamp||b?.constructor?.name==="Timestamp"||b?._bsontype==="Timestamp")try{return new Date(b.toNumber?1e3*b.toNumber():b.getHighBits()).toISOString()}catch{return String(b)}if(Array.isArray(b))return b.map(a);if(null!==b&&"object"==typeof b&&!Array.isArray(b)){let c={};for(let d of Object.keys(b))c[d]=a(b[d]);return c}try{return JSON.parse(JSON.stringify(b))}catch{return String(b)}}(a)}function f(a){return a.map(e)}},59594:a=>{a.exports={emptyState:"recurring-payments_emptyState__KuFd7",emptyStateIcon:"recurring-payments_emptyStateIcon__6vjjv",container:"recurring-payments_container__ofo0N",recurringItem:"recurring-payments_recurringItem__71qqy",recurringItemLeft:"recurring-payments_recurringItemLeft__TQAKy",categoryIcon:"recurring-payments_categoryIcon__I33ZT",itemDetails:"recurring-payments_itemDetails__GV38D",itemName:"recurring-payments_itemName__Gk_16",itemFrequency:"recurring-payments_itemFrequency__3lOEs",recurringItemRight:"recurring-payments_recurringItemRight__biOP1",itemAmount:"recurring-payments_itemAmount__N2_VE",itemDate:"recurring-payments_itemDate__5fIIC",seeMore:"recurring-payments_seeMore___Afa7"}},68466:(a,b,c)=>{"use strict";c.d(b,{E:()=>p});var d=c(13486),e=c(60159),f=c(27892),g=c(51981),h=c(37693),i=c(68866),j=c(11226),k=c(67479),l=c(62693),m=c(98116),n=c(8168),o=c.n(n);let p=({data:a,currency:b,transactions:c})=>{let n=new Date;n.getDate();let p=n.getMonth(),q=n.getFullYear(),r=0===p?11:p-1,s=0===p?q-1:q,t=new Date(q,p+1,0).getDate(),u=new Date(s,r+1,0).getDate(),v=Math.max(t,u),w=(0,e.useMemo)(()=>{let a=[];for(let b=1;b<=v;b++){let d=b<=t?c.filter(a=>{let c=a.date;return c.getDate()===b&&c.getMonth()===p&&c.getFullYear()===q&&"expense"===a.type}).reduce((a,b)=>a+b.numericAmount,0):null,e=b<=u?c.filter(a=>{let c=a.date;return c.getDate()===b&&c.getMonth()===r&&c.getFullYear()===s&&"expense"===a.type}).reduce((a,b)=>a+b.numericAmount,0):null;a.push({day:b.toString(),currentMonth:d,previousMonth:e})}return a},[p,q,r,s,c,t,u,v]);return(0,d.jsx)("div",{style:{width:"100%",height:"350px",minHeight:"350px",marginBottom:"16px"},children:(0,d.jsx)(f.u,{width:"100%",height:"100%",children:(0,d.jsxs)(g.b,{data:w,margin:{top:20,right:10,left:0,bottom:5},children:[(0,d.jsx)(h.W,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#6b7280"},interval:Math.floor(v/4)}),(0,d.jsx)(i.h,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fill:"#6b7280"},tickFormatter:a=>(0,m.v)(a,b)}),(0,d.jsx)(j.m,{content:(0,d.jsx)(({active:c,payload:e,label:f})=>c&&e&&e.length?(0,d.jsxs)("div",{className:o().rechartTooltip,children:[(0,d.jsx)("p",{className:o().rechartTooltipLabel,children:`Day ${f}`}),e.map((c,e)=>(0,d.jsxs)("p",{style:{color:c.color},className:o().rechartTooltipValue,children:["\uD83D\uDCB8 ","currentMonth"===c.dataKey?a.currentMonth.name:a.prevMonth.name,": ",(0,m.v)(c.value,b)]},e))]}):null,{})}),(0,d.jsx)(k.s,{wrapperStyle:{paddingTop:"20px"},iconType:"line"}),(0,d.jsx)(l.N,{type:"monotone",dataKey:"currentMonth",stroke:"#856624",strokeWidth:1,dot:!1,connectNulls:!1,name:`${a.currentMonth.name}`}),(0,d.jsx)(l.N,{type:"monotone",dataKey:"previousMonth",stroke:"#f97316",strokeWidth:1,dot:!1,strokeDasharray:"2 5",connectNulls:!1,name:`${a.prevMonth.name}`})]})})})}},77449:(a,b,c)=>{"use strict";c.d(b,{Y:()=>d});let d=(a,b)=>{let c=a.toLowerCase();if(c.includes("grocery")||c.includes("supermarket")||c.includes("food"))return"food";if(c.includes("gas")||c.includes("fuel")||c.includes("petrol"))return"transport";if(c.includes("restaurant")||c.includes("cafe")||c.includes("dining"))return"dining";if(c.includes("shop")||c.includes("store")||c.includes("retail"))return"shopping";if(c.includes("utility")||c.includes("electric")||c.includes("water")||c.includes("internet"))return"utilities";if(c.includes("rent")||c.includes("mortgage")||c.includes("housing"))return"housing";if(c.includes("medical")||c.includes("hospital")||c.includes("pharmacy"))return"healthcare";if(c.includes("entertainment")||c.includes("movie")||c.includes("game"))return"entertainment";if(b&&b.length>0){for(let a of b)for(let b of a.keywords)if(c.includes(b.toLowerCase()))return`custom_${a.id}`}return"other"}},98116:(a,b,c)=>{"use strict";c.d(b,{v:()=>d});let d=(a,b="USD")=>`${({USD:"$",EUR:"€",GBP:"\xa3",JPY:"\xa5",AUD:"A$",CAD:"C$",CHF:"Fr",CNY:"\xa5",INR:"₹",NGN:"₦"})[b]||"$"}${Math.abs(a).toLocaleString()}`}};