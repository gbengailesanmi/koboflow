"use strict";exports.id=338,exports.ids=[338],exports.modules={68338:(a,b,c)=>{c.d(b,{connectDB:()=>k});var d=c(12518);let e=process.env.MONGODB_URI,f=process.env.MONGO_DB_NAME;if(!e)throw Error("Missing MONGODB_URI");let g=globalThis.__mongoClient,h=globalThis.__mongoClientPromise,i=!1;async function j(a){if(!i)try{await a.collection("settings").createIndex({customerId:1},{unique:!0}),await a.collection("settings").createIndex({updatedAt:-1}),i=!0}catch(a){console.error("Error creating indexes:",a)}}async function k(){if(g)return g.db(f);if(!h){let a=new d.MongoClient(e);h=a.connect().then(async()=>{globalThis.__mongoClient=a,console.log("MongoDB online âœ…");let b=a.db(f);return await j(b),a}),globalThis.__mongoClientPromise=h}let a=await h;return g=a,a.db(f)}}};