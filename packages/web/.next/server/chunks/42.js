exports.id=42,exports.ids=[42,212,338],exports.modules={22861:(a,b,c)=>{"use strict";c.d(b,{j2:()=>l,Y9:()=>j,CI:()=>k});var d=c(85746),e=c(28819),f=c(9852),g=c(71401);let h={pages:{signIn:"/login"},callbacks:{async authorized({auth:a,request:{nextUrl:b}}){let c=!!a?.user,d=b.pathname,e=["/","/verify-email","/auth-redirect"].some(a=>d===a||d.startsWith(a+"/"));return!!d.startsWith("/api")||"/auth-redirect"===d||(c&&("/login"===d||"/signup"===d)?Response.redirect(new URL("/auth-redirect",b)):!c&&("/login"===d||"/signup"===d)||!c&&!!e||!!c)}},providers:[]},i=(0,d.Ay)({...h,providers:[(0,e.A)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET,authorization:{params:{prompt:"consent",access_type:"offline",response_type:"code"}}}),(0,f.A)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(a){if(!a?.email||!a?.password)return null;let{connectDB:b}=await c.e(338).then(c.bind(c,68338)),d=await Promise.resolve().then(c.t.bind(c,5486,23)),e=await b(),f=await e.collection("users").findOne({email:a.email.toLowerCase()});if(!f||!f.password)return console.log("User not found or no password for email:",a.email),null;if(!await d.compare(a.password,f.password))return console.log("Invalid password for email:",a.email),null;if(!f.emailVerified)throw console.log("Email not verified for:",a.email,"emailVerified value:",f.emailVerified),Error("Please verify your email before logging in. Check your inbox for the verification link.");return{id:f._id.toString(),email:f.email,name:`${f.firstName} ${f.lastName}`,customerId:f.customerId}}})],callbacks:{...h.callbacks,async signIn({user:a,account:b}){if(b?.provider==="google"){let{connectDB:b}=await c.e(338).then(c.bind(c,68338)),{createUserSettings:d}=await c.e(212).then(c.bind(c,43212)),e=await b(),f=await e.collection("users").findOne({email:a.email});if(f)if(f.customerId)a.customerId=f.customerId;else{let b=(0,g.A)();await e.collection("users").updateOne({email:a.email},{$set:{customerId:b,authProvider:"google"}}),await d(b),a.customerId=b}else{let b=(0,g.A)(),c=a.name?.split(" ")||["",""],f=c[0]||"",h=c.slice(1).join(" ")||"";await e.collection("users").updateOne({email:a.email},{$set:{customerId:b,firstName:f,lastName:h,emailVerified:!0,createdAt:new Date,authProvider:"google"}},{upsert:!0}),await d(b),a.customerId=b}}return!0},jwt:async({token:a,user:b,account:c})=>(b?.customerId&&(a.customerId=b.customerId),a),session:async({session:a,token:b})=>(b?.customerId?a.user.customerId=b.customerId:console.error("No customerId in token for session"),a),redirect:async({url:a,baseUrl:b})=>a.startsWith("/")?`${b}${a}`:a.startsWith(b)?a:`${b}/auth-redirect`},session:{strategy:"jwt",maxAge:604800},secret:process.env.NEXTAUTH_SECRET}),j=i.handlers;i.signIn;let k=i.signOut,l=i.auth},31965:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(66352).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/gbenga.ilesanmi/Github/PD/money-mapper/packages/web/src/app/components/page-layout-with-sidebar/page-layout-with-sidebar.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/gbenga.ilesanmi/Github/PD/money-mapper/packages/web/src/app/components/page-layout-with-sidebar/page-layout-with-sidebar.tsx","default")},37389:a=>{a.exports={Footer:"Footer_Footer__QGeeC",FooterVisible:"Footer_FooterVisible__xN_bA",FooterHidden:"Footer_FooterHidden__xI_Nv"}},40247:a=>{a.exports={layout:"page-layout-with-sidebar_layout___xiLz",content:"page-layout-with-sidebar_content__Rtg0E"}},43212:(a,b,c)=>{"use strict";c.d(b,{createUserSettings:()=>f,h_:()=>g,mJ:()=>h});var d=c(68338);let e={theme:"system",accentColor:"blue",pageColors:{analytics:"#8B7DAB",budget:"#86B0AA",profile:"#f59e0b",settings:"#7D7DBD",transactions:"#966F83",dashboard:"#245cd4"},notifications:{email:{budgetAlerts:!0,weeklyReport:!0,monthlyReport:!0,transactionAlerts:!1},push:{enabled:!1,budgetAlerts:!1,transactionAlerts:!1}},display:{currency:"GBP",dateFormat:"DD/MM/YYYY",timeFormat:"24h",compactView:!1,showDecimals:!0},privacy:{showBalance:!0,showTransactions:!0,analyticsTracking:!0,dataSharing:!1},budget:{defaultPeriod:"monthly",carryOverUnspent:!1,alertThreshold:80,showProjections:!0},transactions:{defaultView:"all",groupByDate:!0,showCategories:!0,autoCategorizationEnabled:!0},createdAt:new Date,updatedAt:new Date};async function f(a){let b=await (0,d.connectDB)(),c={customerId:a,...e,createdAt:new Date,updatedAt:new Date};return await b.collection("settings").insertOne(c),c}async function g(a){let b=await (0,d.connectDB)(),c=await b.collection("settings").findOne({customerId:a});return c||(c=await f(a)),c}async function h(a,b){let c=await (0,d.connectDB)();return await c.collection("settings").findOneAndUpdate({customerId:a},{$set:{...b,updatedAt:new Date}},{returnDocument:"after",upsert:!0})}},50516:(a,b,c)=>{"use strict";c.d(b,{default:()=>m});var d=c(13486),e=c(60159),f=c(2984),g=c(79483),h=c(95005),i=c.n(h);function j({customerId:a}){let b=(0,f.useRouter)(),c=(0,f.usePathname)(),[h,j]=(0,e.useState)([]),k=c.includes("/analytics")?"analytics":c.includes("/budget")?"budget":c.includes("/transactions")?"transactions":c.includes("/profile")?"profile":c.includes("/settings")?"settings":null;return(0,e.useState)(()=>{k&&!h.includes(k)&&j([k])}),(0,d.jsx)("aside",{className:i().sidebar,children:(0,d.jsx)("div",{className:i().sidebarContent,children:(0,d.jsx)("nav",{className:i().nav,children:[{id:"analytics",label:"ANALYTICS",items:[{id:"stats-cards",label:"Stats Overview",scrollTo:"stats-cards"},{id:"expense-breakdown",label:"Expense Breakdown",scrollTo:"expense-breakdown"},{id:"daily-comparison",label:"Daily Expense Comparison",scrollTo:"daily-comparison"},{id:"spending-category",label:"Spending by Category",scrollTo:"spending-category"},{id:"recurring-payments",label:"Recurring Payments",scrollTo:"recurring-payments"},{id:"budget-overview",label:"Budget Overview",scrollTo:"budget-overview"}]},{id:"budget",label:"BUDGET",items:[{id:"monthly-budget",label:"Budget",scrollTo:"monthly-budget"},{id:"category-budgets",label:"Category Budgets",scrollTo:"category-budgets"},{id:"add-category",label:"Add Category Budget",scrollTo:"add-category"}]},{id:"transactions",label:"TRANSACTIONS",items:[{id:"filters",label:"Filters",scrollTo:"filters"},{id:"transaction-list",label:"Transaction List",scrollTo:"transaction-list"}]},{id:"profile",label:"PROFILE",items:[{id:"user-info",label:"User Information",scrollTo:"user-info"},{id:"currency-settings",label:"Currency Settings",scrollTo:"currency-settings"},{id:"about",label:"About",scrollTo:"about"}]},{id:"settings",label:"SETTINGS",items:[{id:"user-profile",label:"User Profile",scrollTo:"user-profile"},{id:"appearance",label:"Appearance",scrollTo:"appearance"},{id:"notifications",label:"Notifications",scrollTo:"notifications"},{id:"security",label:"Security",scrollTo:"security"},{id:"support",label:"Support",scrollTo:"support"},{id:"about-app",label:"About",scrollTo:"about-app"},{id:"account",label:"Account Management",scrollTo:"account"}]}].map(c=>{let e=h.includes(c.id),f=k===c.id;return(0,d.jsxs)("div",{className:i().section,children:[(0,d.jsxs)("div",{className:`${i().sectionHeader} ${f?i().sectionHeaderActive:""}`,children:[(0,d.jsx)("span",{className:i().sectionLabel,onClick:()=>{var d;return d=c.id,void(b.push(`/${a}/${d}`),!h.includes(d)&&j([...h,d]))},style:{cursor:"pointer",flex:1},children:c.label}),(0,d.jsx)("button",{className:i().expandButton,onClick:a=>{var b;a.stopPropagation(),b=c.id,j(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])},children:e?(0,d.jsx)(g.D3D,{className:i().chevron}):(0,d.jsx)(g.vKP,{className:i().chevron})})]}),e&&(0,d.jsx)("div",{className:i().items,children:c.items.map(e=>(0,d.jsx)("button",{className:i().item,onClick:()=>((c,d)=>{if(k===c&&d.scrollTo){let a=document.getElementById(d.scrollTo);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}else b.push(`/${a}/${c}`),setTimeout(()=>{if(d.scrollTo){let a=document.getElementById(d.scrollTo);a&&a.scrollIntoView({behavior:"smooth",block:"start"})}},500)})(c.id,e),children:e.label},e.id))})]},c.id)})})})})}var k=c(40247),l=c.n(k);function m({customerId:a,children:b}){return(0,d.jsxs)("div",{className:l().layout,children:[(0,d.jsx)(j,{customerId:a}),(0,d.jsx)("main",{className:l().content,children:b})]})}},66185:(a,b,c)=>{"use strict";c.d(b,{H:()=>e});var d=c(22861);async function e(){let a=await (0,d.j2)();return a?.user?.customerId?{customerId:a.user.customerId,email:a.user.email,name:a.user.name}:null}},68338:(a,b,c)=>{"use strict";c.d(b,{connectDB:()=>k});var d=c(12518);let e=process.env.MONGODB_URI,f=process.env.MONGO_DB_NAME;if(!e)throw Error("Missing MONGODB_URI");let g=globalThis.__mongoClient,h=globalThis.__mongoClientPromise,i=!1;async function j(a){if(!i)try{await a.collection("settings").createIndex({customerId:1},{unique:!0}),await a.collection("settings").createIndex({updatedAt:-1}),i=!0}catch(a){console.error("Error creating indexes:",a)}}async function k(){if(g)return g.db(f);if(!h){let a=new d.MongoClient(e);h=a.connect().then(async()=>{globalThis.__mongoClient=a,console.log("MongoDB online âœ…");let b=a.db(f);return await j(b),a}),globalThis.__mongoClientPromise=h}let a=await h;return g=a,a.db(f)}},75709:(a,b,c)=>{"use strict";c.d(b,{n:()=>d});let d={analytics:"#8B7DAB",budget:"#86B0AA",profile:"#f59e0b",settings:"#7D7DBD",transactions:"#966F83",dashboard:"#245cd4"}},95005:a=>{a.exports={sidebar:"sidebar-nav_sidebar__NuSYH",sidebarContent:"sidebar-nav_sidebarContent__GnVOp",nav:"sidebar-nav_nav__rcrRi",section:"sidebar-nav_section__hTcrG",sectionHeader:"sidebar-nav_sectionHeader__wG0Uc",sectionHeaderActive:"sidebar-nav_sectionHeaderActive__j_nTi",sectionLabel:"sidebar-nav_sectionLabel__XbeR_",expandButton:"sidebar-nav_expandButton__Myple",chevron:"sidebar-nav_chevron__Y7Pkx",items:"sidebar-nav_items__jsJCM",slideDown:"sidebar-nav_slideDown__3amac",item:"sidebar-nav_item__SAIUp"}},95181:(a,b,c)=>{"use strict";c.d(b,{A:()=>j});var d=c(13486),e=c(60159),f=c(37389),g=c.n(f),h=c(2984),i=c(79483);function j({buttonColor:a,opacity:b=75}){let c=(0,h.useParams)(),f=(0,h.useRouter)(),j=c.customerId,[l,m]=(0,e.useState)(!0),[n,o]=(0,e.useState)(0),p=()=>{f.push(`/${j}/dashboard`)},q=a?{color:a}:{},r={backgroundColor:`rgba(255, 255, 255, ${b/100})`};return(0,d.jsxs)("div",{className:`${g().Footer} ${l?g().FooterVisible:g().FooterHidden}`,style:r,children:[(0,d.jsx)(k,{onClick:p,text:"Home",style:q,textColor:a,children:(0,d.jsx)(i.fAJ,{width:"25",height:"25"})}),(0,d.jsx)(k,{onClick:()=>{f.push(`/${j}/analytics`)},text:"Insights",style:q,textColor:a,children:(0,d.jsx)(i.j2g,{width:"25",height:"25"})}),(0,d.jsx)(k,{onClick:()=>{f.push(`/${j}/budget`)},text:"Budget",style:q,textColor:a,children:(0,d.jsx)(i.LMN,{width:"25",height:"25"})}),(0,d.jsx)(k,{onClick:p,text:"Deals",style:q,textColor:a,children:(0,d.jsx)(i.A20,{width:"25",height:"25"})})]})}function k({text:a="",children:b,textColor:c,onClick:e,style:f}){return(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)("button",{onClick:e,style:f,className:"p-3 rounded-full bg-transparent hover:bg-gray-100/10 transition-colors cursor-pointer border-none",children:b}),a&&(0,d.jsx)("div",{className:"text-xs text-center",style:c?{color:c}:{},children:a})]})}}};