"use strict";exports.id=212,exports.ids=[212,338],exports.modules={43212:(a,b,c)=>{c.d(b,{createUserSettings:()=>f,h_:()=>g,mJ:()=>h});var d=c(68338);let e={theme:"system",accentColor:"blue",pageColors:{analytics:"#8B7DAB",budget:"#86B0AA",profile:"#f59e0b",settings:"#7D7DBD",transactions:"#966F83",dashboard:"#245cd4"},notifications:{email:{budgetAlerts:!0,weeklyReport:!0,monthlyReport:!0,transactionAlerts:!1},push:{enabled:!1,budgetAlerts:!1,transactionAlerts:!1}},display:{currency:"GBP",dateFormat:"DD/MM/YYYY",timeFormat:"24h",compactView:!1,showDecimals:!0},privacy:{showBalance:!0,showTransactions:!0,analyticsTracking:!0,dataSharing:!1},budget:{defaultPeriod:"monthly",carryOverUnspent:!1,alertThreshold:80,showProjections:!0},transactions:{defaultView:"all",groupByDate:!0,showCategories:!0,autoCategorizationEnabled:!0},createdAt:new Date,updatedAt:new Date};async function f(a){let b=await (0,d.connectDB)(),c={customerId:a,...e,createdAt:new Date,updatedAt:new Date};return await b.collection("settings").insertOne(c),c}async function g(a){let b=await (0,d.connectDB)(),c=await b.collection("settings").findOne({customerId:a});return c||(c=await f(a)),c}async function h(a,b){let c=await (0,d.connectDB)();return await c.collection("settings").findOneAndUpdate({customerId:a},{$set:{...b,updatedAt:new Date}},{returnDocument:"after",upsert:!0})}},68338:(a,b,c)=>{c.d(b,{connectDB:()=>k});var d=c(12518);let e=process.env.MONGODB_URI,f=process.env.MONGO_DB_NAME;if(!e)throw Error("Missing MONGODB_URI");let g=globalThis.__mongoClient,h=globalThis.__mongoClientPromise,i=!1;async function j(a){if(!i)try{await a.collection("settings").createIndex({customerId:1},{unique:!0}),await a.collection("settings").createIndex({updatedAt:-1}),i=!0}catch(a){console.error("Error creating indexes:",a)}}async function k(){if(g)return g.db(f);if(!h){let a=new d.MongoClient(e);h=a.connect().then(async()=>{globalThis.__mongoClient=a,console.log("MongoDB online âœ…");let b=a.db(f);return await j(b),a}),globalThis.__mongoClientPromise=h}let a=await h;return g=a,a.db(f)}}};