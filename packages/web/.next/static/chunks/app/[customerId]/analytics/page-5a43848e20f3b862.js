(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8631],{8615:e=>{e.exports={layout:"page-layout-with-sidebar_layout___xiLz",content:"page-layout-with-sidebar_content__Rtg0E"}},13946:e=>{e.exports={statsGrid:"stats-cards_statsGrid__R99kE",statsCard:"stats-cards_statsCard__iBZ6N",statsCardHeader:"stats-cards_statsCardHeader__hzHcC",statsCardTitle:"stats-cards_statsCardTitle__Z2LbZ",statsCardContent:"stats-cards_statsCardContent__8Sm60",statsValue:"stats-cards_statsValue__sqM_A",incomeColor:"stats-cards_incomeColor__8vKqG",expenseColor:"stats-cards_expenseColor__o8_2_"}},24563:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var n=a(54568);a(7620);var r=a(58677),s=a(62942),i=a(75477),c=a.n(i);let l=e=>{let{title:t,subtitle:a,backTo:i}=e,l=(0,s.useRouter)();return(0,s.useParams)().customerId,(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:c().header,children:[(0,n.jsx)("div",{className:c().backButton,children:(0,n.jsx)(r.A60,{className:c().backIcon,onClick:()=>{i?l.push(i):l.back()},style:{color:"#fff"}})}),(0,n.jsx)("div",{className:c().headerCenter,children:(0,n.jsx)("h1",{className:c().title,children:t})})]}),a&&(0,n.jsx)("div",{className:c().subtitle,children:(0,n.jsx)("p",{className:c().subtitleText,children:a})})]})}},34974:e=>{e.exports={pieChartWrapper:"pie-chart_pieChartWrapper__z8ixJ",pieChartContainer:"pie-chart_pieChartContainer__KQWQa",pieTooltipContent:"pie-chart_pieTooltipContent__IcVkL",pieTooltipTitle:"pie-chart_pieTooltipTitle__sPNdX",pieTooltipValue:"pie-chart_pieTooltipValue__RpdZR",pieTooltipPercentage:"pie-chart_pieTooltipPercentage__OprjK",pieLegend:"pie-chart_pieLegend__quF4m",pieLegendItem:"pie-chart_pieLegendItem__QTS5y",pieLegendItemHover:"pie-chart_pieLegendItemHover__F_R3f",pieLegendColor:"pie-chart_pieLegendColor__5jEbz",pieLegendLabel:"pie-chart_pieLegendLabel__D_kwu",pieLegendPercentage:"pie-chart_pieLegendPercentage__zRnVs"}},43034:e=>{e.exports={comparisonStat:"daily-spending-comparison_comparisonStat__LH4AH",comparisonValue:"daily-spending-comparison_comparisonValue__jV1b2",incomeColor:"daily-spending-comparison_incomeColor__ZRAJv",expenseColor:"daily-spending-comparison_expenseColor__cZNlS"}},51240:e=>{e.exports={container:"category-breakdown_container__pUT9s",addButton:"category-breakdown_addButton__4hfRO",addForm:"category-breakdown_addForm__z_alZ",input:"category-breakdown_input__qHwtL",formButtons:"category-breakdown_formButtons__3RvaF",saveBtn:"category-breakdown_saveBtn__z0IDe",cancelBtn:"category-breakdown_cancelBtn__ibcct",categoryList:"category-breakdown_categoryList__Fftqv",categoryItem:"category-breakdown_categoryItem__zuUsm",categoryItemLeft:"category-breakdown_categoryItemLeft__htq1l",categoryColor:"category-breakdown_categoryColor__HhN3f",categoryLabel:"category-breakdown_categoryLabel__iRFT0",categoryItemRight:"category-breakdown_categoryItemRight__a9_1z",categoryPercentage:"category-breakdown_categoryPercentage__F4knP",categoryAmount:"category-breakdown_categoryAmount__xHkB9",deleteBtn:"category-breakdown_deleteBtn__38i01",error:"category-breakdown_error__TaNze",noData:"category-breakdown_noData__i6ZVv"}},58321:e=>{e.exports={sidebar:"sidebar-nav_sidebar__NuSYH",sidebarContent:"sidebar-nav_sidebarContent__GnVOp",nav:"sidebar-nav_nav__rcrRi",section:"sidebar-nav_section__hTcrG",sectionHeader:"sidebar-nav_sectionHeader__wG0Uc",sectionHeaderActive:"sidebar-nav_sectionHeaderActive__j_nTi",sectionLabel:"sidebar-nav_sectionLabel__XbeR_",expandButton:"sidebar-nav_expandButton__Myple",chevron:"sidebar-nav_chevron__Y7Pkx",items:"sidebar-nav_items__jsJCM",slideDown:"sidebar-nav_slideDown__3amac",item:"sidebar-nav_item__SAIUp"}},63461:(e,t,a)=>{Promise.resolve().then(a.bind(a,98812)),Promise.resolve().then(a.bind(a,80747))},71934:e=>{e.exports={container:"analytics-page-client_container__aRDF2",wrapper:"analytics-page-client_wrapper__FvuJN",header:"analytics-page-client_header__k9Gy6",backButton:"analytics-page-client_backButton__3FYvD",headerCenter:"analytics-page-client_headerCenter__NFuxU",title:"analytics-page-client_title__Zt6FI",subtitle:"analytics-page-client_subtitle__szeZf",subtitleText:"analytics-page-client_subtitleText__4V1r2",backIcon:"analytics-page-client_backIcon__NnQyl",timeRangeContainer:"analytics-page-client_timeRangeContainer__2y6Y4",timeRangeTabs:"analytics-page-client_timeRangeTabs__c9lFx",timeRangeTab:"analytics-page-client_timeRangeTab__cn8OG",timeRangeTabActive:"analytics-page-client_timeRangeTabActive___Yi4M",buttonActivate:"analytics-page-client_buttonActivate__BVaWZ",accountSelectorContainer:"analytics-page-client_accountSelectorContainer__hdG25",accountSelectorLabel:"analytics-page-client_accountSelectorLabel__c2wMc",accountSelector:"analytics-page-client_accountSelector__nJVZ8",emptyState:"analytics-page-client_emptyState__zeNoI",emptyStateContent:"analytics-page-client_emptyStateContent__0_8fC",emptyStateIcon:"analytics-page-client_emptyStateIcon__vdPoK",emptyStateTitle:"analytics-page-client_emptyStateTitle__uJQJ2",emptyStateText:"analytics-page-client_emptyStateText__FehD0",noData:"analytics-page-client_noData__UO9__",chartContainer:"analytics-page-client_chartContainer__Yzb8a",comparisonStats:"analytics-page-client_comparisonStats__RwGDd",rechartTooltip:"analytics-page-client_rechartTooltip__Mzsv3",rechartTooltipLabel:"analytics-page-client_rechartTooltipLabel__89qCg",rechartTooltipValue:"analytics-page-client_rechartTooltipValue__Gx64Z",headerSection:"analytics-page-client_headerSection__pu9At",main:"analytics-page-client_main__D_gnt",statsGrid:"analytics-page-client_statsGrid__cylmt",analyticsCard:"analytics-page-client_analyticsCard__c5WSb",scrollHint:"analytics-page-client_scrollHint__pyNQT"}},75477:e=>{e.exports={header:"page-header_header__LWTx2",backButton:"page-header_backButton__MXBy6",headerCenter:"page-header_headerCenter__FpQ7W",title:"page-header_title__Ws1VT",subtitle:"page-header_subtitle__fHcsX",subtitleText:"page-header_subtitleText__gRl4D",backIcon:"page-header_backIcon__DyG0u"}},80747:(e,t,a)=>{"use strict";a.d(t,{default:()=>p});var n=a(54568),r=a(7620),s=a(62942),i=a(58677),c=a(58321),l=a.n(c);function o(e){let{customerId:t}=e,a=(0,s.useRouter)(),c=(0,s.usePathname)(),[o,d]=(0,r.useState)([]),u=c.includes("/analytics")?"analytics":c.includes("/budget")?"budget":c.includes("/transactions")?"transactions":c.includes("/profile")?"profile":c.includes("/settings")?"settings":null;return(0,r.useState)(()=>{u&&!o.includes(u)&&d([u])}),(0,n.jsx)("aside",{className:l().sidebar,children:(0,n.jsx)("div",{className:l().sidebarContent,children:(0,n.jsx)("nav",{className:l().nav,children:[{id:"analytics",label:"ANALYTICS",items:[{id:"stats-cards",label:"Stats Overview",scrollTo:"stats-cards"},{id:"expense-breakdown",label:"Expense Breakdown",scrollTo:"expense-breakdown"},{id:"daily-comparison",label:"Daily Expense Comparison",scrollTo:"daily-comparison"},{id:"spending-category",label:"Spending by Category",scrollTo:"spending-category"},{id:"recurring-payments",label:"Recurring Payments",scrollTo:"recurring-payments"},{id:"budget-overview",label:"Budget Overview",scrollTo:"budget-overview"}]},{id:"budget",label:"BUDGET",items:[{id:"monthly-budget",label:"Budget",scrollTo:"monthly-budget"},{id:"category-budgets",label:"Category Budgets",scrollTo:"category-budgets"},{id:"add-category",label:"Add Category Budget",scrollTo:"add-category"}]},{id:"transactions",label:"TRANSACTIONS",items:[{id:"filters",label:"Filters",scrollTo:"filters"},{id:"transaction-list",label:"Transaction List",scrollTo:"transaction-list"}]},{id:"profile",label:"PROFILE",items:[{id:"user-info",label:"User Information",scrollTo:"user-info"},{id:"currency-settings",label:"Currency Settings",scrollTo:"currency-settings"},{id:"about",label:"About",scrollTo:"about"}]},{id:"settings",label:"SETTINGS",items:[{id:"user-profile",label:"User Profile",scrollTo:"user-profile"},{id:"appearance",label:"Appearance",scrollTo:"appearance"},{id:"notifications",label:"Notifications",scrollTo:"notifications"},{id:"security",label:"Security",scrollTo:"security"},{id:"support",label:"Support",scrollTo:"support"},{id:"about-app",label:"About",scrollTo:"about-app"},{id:"account",label:"Account Management",scrollTo:"account"}]}].map(e=>{let r=o.includes(e.id),s=u===e.id;return(0,n.jsxs)("div",{className:l().section,children:[(0,n.jsxs)("div",{className:"".concat(l().sectionHeader," ").concat(s?l().sectionHeaderActive:""),children:[(0,n.jsx)("span",{className:l().sectionLabel,onClick:()=>{var n;return n=e.id,void(a.push("/".concat(t,"/").concat(n)),!o.includes(n)&&d([...o,n]))},style:{cursor:"pointer",flex:1},children:e.label}),(0,n.jsx)("button",{className:l().expandButton,onClick:t=>{var a;t.stopPropagation(),a=e.id,d(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a])},children:r?(0,n.jsx)(i.D3D,{className:l().chevron}):(0,n.jsx)(i.vKP,{className:l().chevron})})]}),r&&(0,n.jsx)("div",{className:l().items,children:e.items.map(r=>(0,n.jsx)("button",{className:l().item,onClick:()=>((e,n)=>{if(u===e&&n.scrollTo){let e=document.getElementById(n.scrollTo);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}else a.push("/".concat(t,"/").concat(e)),setTimeout(()=>{if(n.scrollTo){let e=document.getElementById(n.scrollTo);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}},500)})(e.id,r),children:r.label},r.id))})]},e.id)})})})})}var d=a(8615),u=a.n(d);function p(e){let{customerId:t,children:a}=e;return(0,n.jsxs)("div",{className:u().layout,children:[(0,n.jsx)(o,{customerId:t}),(0,n.jsx)("main",{className:u().content,children:a})]})}},82248:(e,t,a)=>{"use strict";a.d(t,{P:()=>r});let n={food:{label:"Food & Groceries",color:"#10b981"},transport:{label:"Transportation",color:"#3b82f6"},dining:{label:"Dining Out",color:"#f59e0b"},shopping:{label:"Shopping",color:"#ef4444"},utilities:{label:"Utilities",color:"#8b5cf6"},housing:{label:"Housing",color:"#06b6d4"},healthcare:{label:"Healthcare",color:"#ec4899"},entertainment:{label:"Entertainment",color:"#84cc16"},other:{label:"Other",color:"#6b7280"}};function r(e){let t={...n};return e&&e.forEach(e=>{t["custom_".concat(e.id)]={label:e.name,color:e.color}}),t}},89798:e=>{e.exports={card:"analytics-card_card__zGQwP",cardHeader:"analytics-card_cardHeader__De66P",cardTitle:"analytics-card_cardTitle__iXadG",cardDescription:"analytics-card_cardDescription__is_yt",cardContent:"analytics-card_cardContent__TpwJb"}},95334:e=>{e.exports={budgetOverview:"budget-overview_budgetOverview__D9PEv",budgetProgress:"budget-overview_budgetProgress__6YEDf",budgetProgressBar:"budget-overview_budgetProgressBar__off1a",budgetProgressFill:"budget-overview_budgetProgressFill__T4Oqi",budgetLabels:"budget-overview_budgetLabels__kcfYE",budgetRemaining:"budget-overview_budgetRemaining__23DaD",incomeColor:"budget-overview_incomeColor__66Esv",expenseColor:"budget-overview_expenseColor__9P3r9"}},98812:(e,t,a)=>{"use strict";a.d(t,{default:()=>U});var n=a(54568),r=a(7620),s=a(62942),i=a(11475),c=a(24563),l=a(44644),o=a(97711),d=a(15816),u=a(82248),p=a(28027),m=a(61422),g=a(83710),_=a(58553),h=a(95191),y=a(34974),x=a.n(y);let b=e=>{let{data:t,categoryConfig:a,currency:s}=e,[i,c]=(0,r.useState)(null),l=t.map(e=>{var t;return{name:(null==(t=a[e.category])?void 0:t.label)||"Other",value:e.amount,percentage:e.percentage,category:e.category}});return(0,n.jsxs)("div",{className:x().pieChartWrapper,children:[(0,n.jsx)("div",{className:x().pieChartContainer,children:(0,n.jsx)(p.u,{width:"100%",height:300,children:(0,n.jsxs)(m.r,{children:[(0,n.jsx)(g.F,{data:l,cx:"50%",cy:"50%",labelLine:!1,outerRadius:100,fill:"#8884d8",dataKey:"value",onMouseEnter:(e,t)=>c(t),onMouseLeave:()=>c(null),children:l.map((e,t)=>{let r=a[e.category]||a.other;return(0,n.jsx)(_.f,{fill:r.color,opacity:null===i||i===t?1:.6,stroke:i===t?r.color:"none",strokeWidth:3*(i===t)},"cell-".concat(t))})}),(0,n.jsx)(h.m,{content:(0,n.jsx)(e=>{let{active:t,payload:a}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,n.jsxs)("div",{className:x().pieTooltipContent,children:[(0,n.jsx)("div",{className:x().pieTooltipTitle,children:e.name}),(0,n.jsx)("div",{className:x().pieTooltipValue,children:(0,d.v)(e.value,s)}),(0,n.jsxs)("div",{className:x().pieTooltipPercentage,children:[e.percentage.toFixed(1),"%"]})]})}return null},{})})]})})}),(0,n.jsx)("div",{className:x().pieLegend,children:l.map((e,t)=>{let r=a[e.category]||a.other;return(0,n.jsxs)("div",{className:"".concat(x().pieLegendItem," ").concat(i===t?x().pieLegendItemHover:""),onMouseEnter:()=>c(t),onMouseLeave:()=>c(null),children:[(0,n.jsx)("div",{className:x().pieLegendColor,style:{backgroundColor:r.color}}),(0,n.jsx)("span",{className:x().pieLegendLabel,children:r.label}),(0,n.jsxs)("span",{className:x().pieLegendPercentage,children:[e.percentage.toFixed(1),"%"]})]},e.category)})})]})};var v=a(76108),j=a(29155),C=a(13946),f=a.n(C);let N=e=>{let{totalIncome:t,totalExpense:a,netBalance:r,incomeTransactionCount:s,expenseTransactionCount:i,currency:c}=e;return(0,n.jsxs)("div",{className:f().statsGrid,children:[(0,n.jsxs)("div",{className:f().statsCard,children:[(0,n.jsx)("div",{className:f().statsCardHeader,children:(0,n.jsx)("div",{className:f().statsCardTitle,children:"\uD83D\uDCB0 Total Income"})}),(0,n.jsxs)("div",{className:f().statsCardContent,children:[(0,n.jsx)("div",{className:"".concat(f().statsValue," ").concat(f().incomeColor),children:(0,d.v)(t,c)}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[s," transactions"]})]})]}),(0,n.jsxs)("div",{className:f().statsCard,children:[(0,n.jsx)("div",{className:f().statsCardHeader,children:(0,n.jsx)("div",{className:f().statsCardTitle,children:"\uD83D\uDCB8 Total Expenses"})}),(0,n.jsxs)("div",{className:f().statsCardContent,children:[(0,n.jsx)("div",{className:"".concat(f().statsValue," ").concat(f().expenseColor),children:(0,d.v)(a,c)}),(0,n.jsxs)("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:[i," transactions"]})]})]}),(0,n.jsxs)("div",{className:f().statsCard,children:[(0,n.jsx)("div",{className:f().statsCardHeader,children:(0,n.jsx)("div",{className:f().statsCardTitle,children:"\uD83D\uDCCA Net Balance"})}),(0,n.jsxs)("div",{className:f().statsCardContent,children:[(0,n.jsx)("div",{className:"".concat(f().statsValue," ").concat(r>=0?f().incomeColor:f().expenseColor),children:(0,d.v)(r,c)}),(0,n.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginTop:"4px"},children:r>=0?"Positive cash flow":"Negative cash flow"})]})]})]})},T={grocery:"Food",supermarket:"Food",food:"Food",gas:"Transport",fuel:"Transport",petrol:"Transport",restaurant:"Dining",cafe:"Dining",dining:"Dining",shop:"Shopping",store:"Shopping",retail:"Shopping",utility:"Utilities",electric:"Utilities",water:"Utilities",internet:"Utilities",rent:"Housing",mortgage:"Housing",housing:"Housing",medical:"Healthcare",hospital:"Healthcare",pharmacy:"Healthcare",entertainment:"Entertainment",movie:"Entertainment",game:"Entertainment"};var D=a(51240),w=a.n(D);let S=e=>{let{categoryData:t,currency:a,customCategories:s,onAddCategory:i,onDeleteCategory:c}=e,[l,o]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,_]=(0,r.useState)(""),[h,y]=(0,r.useState)(!1),[x,b]=(0,r.useState)(""),v=(0,u.P)(s),j=(0,r.useMemo)(()=>{let e=[...t];return s.forEach(t=>{let a="custom_".concat(t.id);e.find(e=>e.category===a)||e.push({category:a,amount:0,percentage:0,count:0})}),e.sort((e,t)=>t.amount-e.amount)},[t,s]),C=async()=>{if(!p.trim()||!g.trim())return;let e=g.split(",").map(e=>e.trim()).filter(e=>e.length>0),t=function(e,t,a){let n=[],r=e.map(e=>e.toLowerCase().trim());for(let e of r){let t=T[e];t&&n.push({keyword:e,categoryName:t,isDefault:!0})}for(let e of t)if(1)for(let t of e.keywords){let a=t.toLowerCase().trim();r.includes(a)&&n.push({keyword:t,categoryName:e.name,isDefault:!1})}return{isValid:0===n.length,conflicts:n}}(e,s);if(!t.isValid)return void b(t.conflicts.map(e=>e.isDefault?'Keyword "'.concat(e.keyword,'" already captured under ').concat(e.categoryName," category."):'Keyword "'.concat(e.keyword,'" already used in "').concat(e.categoryName,'" custom category.')).join(" "));y(!0),b("");try{await i(p.trim(),e),m(""),_(""),o(!1)}catch(e){console.error("Failed to add category:",e),b("Failed to add category. Please try again.")}finally{y(!1)}},f=async e=>{if(!e.startsWith("custom_"))return;let t=e.replace("custom_","");if(confirm("Delete this custom category?")){y(!0);try{await c(t)}catch(e){console.error("Failed to delete category:",e)}finally{y(!1)}}};return 0===t.length&&0===s.length?(0,n.jsxs)("div",{className:w().container,children:[l&&(0,n.jsxs)("div",{className:w().addForm,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"text",placeholder:"Category name",value:p,onChange:e=>m(e.target.value),className:w().input,disabled:h}),(0,n.jsx)("input",{type:"text",placeholder:"Keywords (comma-separated)",value:g,onChange:e=>{_(e.target.value),b("")},className:w().input,disabled:h}),(0,n.jsxs)("div",{className:w().formButtons,children:[(0,n.jsx)("button",{onClick:C,className:w().saveBtn,disabled:h,children:h?"...":"✓"}),(0,n.jsx)("button",{onClick:()=>{o(!1),b("")},className:w().cancelBtn,disabled:h,children:"✕"})]})]}),x&&(0,n.jsx)("div",{className:w().error,children:x})]}),!l&&(0,n.jsx)("button",{onClick:()=>o(!0),className:w().addButton,children:"➕ Add Custom Category"}),(0,n.jsxs)("div",{className:w().noData,children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCC8"}),"No expense data for this period"]})]}):(0,n.jsxs)("div",{className:w().container,children:[l&&(0,n.jsxs)("div",{className:w().addForm,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("input",{type:"text",placeholder:"Category name",value:p,onChange:e=>m(e.target.value),className:w().input,disabled:h}),(0,n.jsx)("input",{type:"text",placeholder:"Keywords (comma-separated)",value:g,onChange:e=>{_(e.target.value),b("")},className:w().input,disabled:h}),(0,n.jsxs)("div",{className:w().formButtons,children:[(0,n.jsx)("button",{onClick:C,className:w().saveBtn,disabled:h,children:h?"...":"✓"}),(0,n.jsx)("button",{onClick:()=>{o(!1),b("")},className:w().cancelBtn,disabled:h,children:"✕"})]})]}),x&&(0,n.jsx)("div",{className:w().error,children:x})]}),!l&&(0,n.jsx)("button",{onClick:()=>o(!0),className:w().addButton,children:"➕"}),(0,n.jsx)("div",{className:w().categoryList,children:j.slice(0,10).map(e=>{let t=v[e.category]||v.other,r=e.category.startsWith("custom_");return(0,n.jsxs)("div",{className:w().categoryItem,children:[(0,n.jsxs)("div",{className:w().categoryItemLeft,children:[(0,n.jsx)("div",{className:w().categoryColor,style:{backgroundColor:t.color}}),(0,n.jsx)("span",{className:w().categoryLabel,children:t.label})]}),(0,n.jsxs)("div",{className:w().categoryItemRight,children:[(0,n.jsxs)("span",{className:w().categoryPercentage,children:[e.percentage.toFixed(1),"%"]}),(0,n.jsx)("span",{className:w().categoryAmount,children:(0,d.v)(e.amount,a)}),r&&(0,n.jsx)("button",{onClick:()=>f(e.category),className:w().deleteBtn,disabled:h,title:"Delete category",children:"✕"})]})]},e.category)})})]})};var k=a(95334),B=a.n(k);let A=e=>{let{monthlyExpense:t,totalBudgetLimit:a,currency:r}=e;return(0,n.jsx)("div",{className:B().budgetOverview,children:(0,n.jsxs)("div",{className:B().budgetProgress,children:[(0,n.jsx)("div",{className:B().budgetProgressBar,children:(0,n.jsx)("div",{className:B().budgetProgressFill,style:{width:"".concat(Math.min(t/a*100,100),"%"),background:t>a?"linear-gradient(90deg, #ef4444, #dc2626)":"linear-gradient(90deg, #10b981, #059669)"}})}),(0,n.jsxs)("div",{className:B().budgetLabels,children:[(0,n.jsxs)("span",{children:["\uD83D\uDCB8 Spent: ",(0,d.v)(t,r)]}),(0,n.jsxs)("span",{children:["\uD83C\uDFAF Budget: ",(0,d.v)(a,r)]})]}),(0,n.jsx)("div",{className:B().budgetRemaining,children:(0,n.jsx)("span",{className:t<=a?B().incomeColor:B().expenseColor,children:t<=a?"\uD83C\uDF89 ".concat((0,d.v)(a-t,r)," remaining"):"⚠️ ".concat((0,d.v)(t-a,r)," over budget")})})]})})};var F=a(43034),L=a.n(F);let M=e=>{let{currentMonthAverage:t,prevMonthAverage:a,currentMonthName:r,prevMonthName:s,currency:i}=e,c=t-a,l=c<0;return(0,n.jsxs)("div",{className:L().comparisonStat,children:[(0,n.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#374151",marginBottom:"12px"},children:"Average Daily Spending"}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"16px",alignItems:"center",marginBottom:"12px",flexWrap:"wrap",justifyContent:"center"},children:[(0,n.jsxs)("div",{style:{flex:"1",minWidth:"120px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Current Month"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:"700",color:"#1f2937"},children:[(0,d.v)(Math.round(t),i),"/day"]})]}),(0,n.jsx)("div",{style:{fontSize:"20px",color:"#d1d5db"},children:"→"}),(0,n.jsxs)("div",{style:{flex:"1",minWidth:"120px",textAlign:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"12px",color:"#6b7280",marginBottom:"4px"},children:"Previous Month"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:"700",color:"#6b7280"},children:[(0,d.v)(Math.round(a),i),"/day"]})]})]}),(0,n.jsx)("div",{style:{padding:"12px 16px",borderRadius:"8px",background:l?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",textAlign:"center"},children:(0,n.jsxs)("span",{className:"".concat(L().comparisonValue," ").concat(l?L().incomeColor:L().expenseColor),style:{fontSize:"14px"},children:[l?"\uD83D\uDCC9 ":"\uD83D\uDCC8 ",l?"Saving ":"Spending ",(0,d.v)(Math.abs(Math.round(c)),i)," more per day"," ","(",Math.abs(a>0?c/a*100:0).toFixed(1),"% ",l?"less":"more",")"]})})]})};var I=a(89798),P=a.n(I);let E=e=>{let{title:t,description:a,children:r}=e;return(0,n.jsxs)("div",{className:P().card,children:[(0,n.jsxs)("div",{className:P().cardHeader,children:[(0,n.jsx)("h2",{className:P().cardTitle,children:t}),(0,n.jsx)("p",{className:P().cardDescription,children:a})]}),(0,n.jsx)("div",{className:P().cardContent,children:r})]})};var R=a(64722),H=a(68082),z=a(14440),V=a(83876),G=a(48334),O=a(81357),Y=a(71934),W=a.n(Y);function U(e){let{accounts:t,transactions:a,customCategories:p,profile:m,pageColor:g}=e,{setBaseColor:_}=(0,l.Q)(),[h,y]=(0,r.useState)("all"),[x,C]=(0,r.useState)("month"),[f,T]=(0,r.useState)(!1),[D,w]=(0,r.useState)(p),k=(0,s.useParams)(),B=(0,s.useRouter)();k.customerId;let F=(0,r.useMemo)(()=>(0,u.P)(D),[D]);(0,r.useEffect)(()=>{_("".concat(g,"4D"))},[g,_]),(0,r.useEffect)(()=>{T(!0);let e=localStorage.getItem("analytics-time-period");e&&["day","month","year"].includes(e)&&C(e)},[]),(0,r.useEffect)(()=>{f&&localStorage.setItem("analytics-time-period",x)},[x,f]);let L=async(e,t,a)=>{try{let n=await fetch("/api/custom-categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,keywords:t,color:a})});if(n.ok){let e=await n.json();w([...D,e]),B.refresh()}}catch(e){console.error("Failed to add category:",e)}},I=async e=>{try{(await fetch("/api/custom-categories?id=".concat(e),{method:"DELETE"})).ok&&(w(D.filter(t=>t.id!==e)),B.refresh())}catch(e){console.error("Failed to delete category:",e)}},P=(0,r.useMemo)(()=>{let e=a;return"all"!==h&&(e=a.filter(e=>e.accountUniqueId===h)),e.map(e=>{let t=parseFloat(e.amount);return{...e,numericAmount:Math.abs(t),type:t<0?"expense":"income",category:t<0?(0,o.Y)(e.narration,D):"income",date:new Date(e.bookedDate)}})},[a,h,D]),Y=(0,r.useMemo)(()=>{let e=new Date;return P.filter(t=>{let a=t.date;switch(x){case"day":return a.getDate()===e.getDate()&&a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear();case"month":return a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear();case"year":return a.getFullYear()===e.getFullYear();default:return!0}})},[P,x]),U=(0,r.useMemo)(()=>{let e=Y.filter(e=>"expense"===e.type),t=e.reduce((e,t)=>e+t.numericAmount,0),a=new Map;return e.forEach(e=>{let t=a.get(e.category)||{category:e.category,amount:0,percentage:0,count:0};a.set(e.category,{...t,amount:t.amount+e.numericAmount,count:t.count+1})}),Array.from(a.values()).map(e=>({...e,percentage:t>0?e.amount/t*100:0})).sort((e,t)=>t.amount-e.amount)},[Y]),Z=Y.filter(e=>"income"===e.type).reduce((e,t)=>e+t.numericAmount,0),q=Y.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.numericAmount,0),J=(0,r.useMemo)(()=>{let e=new Date;return P.filter(t=>{let a=t.date;return a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear()&&"expense"===t.type}).reduce((e,t)=>e+t.numericAmount,0)},[P]),K=(0,r.useMemo)(()=>{let e=new Date,t=e.getMonth(),a=e.getFullYear(),n=0===t?11:t-1,r=0===t?a-1:a,s=P.filter(e=>{let n=e.date;return n.getMonth()===t&&n.getFullYear()===a}),i=P.filter(e=>{let t=e.date;return t.getMonth()===n&&t.getFullYear()===r}),c=s.filter(e=>"income"===e.type).reduce((e,t)=>e+t.numericAmount,0),l=s.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.numericAmount,0),o=i.filter(e=>"income"===e.type).reduce((e,t)=>e+t.numericAmount,0),d=i.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.numericAmount,0),u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=e.getDate(),m=new Date(r,n+1,0).getDate();return{currentMonth:{name:u[t],income:c,expense:l,daysElapsed:p,dailyAverage:p>0?l/p:0},prevMonth:{name:u[n],income:o,expense:d,totalDays:m,dailyAverage:m>0?d/m:0}}},[P]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(W().container," page-gradient-background"),children:[(0,n.jsxs)("div",{className:W().headerSection,children:[(0,n.jsx)(c.z,{title:"Insights",subtitle:"Look into your spending patterns and trends"}),(0,n.jsxs)(R.s,{className:W().accountSelectorContainer,direction:"column",gap:"2",children:[(0,n.jsx)(H.E,{as:"label",size:"2",weight:"medium",children:"Filter by Account:"}),(0,n.jsxs)(z.bL,{value:h,onValueChange:e=>y(e),children:[(0,n.jsx)(z.l9,{className:W().accountSelector}),(0,n.jsxs)(z.UC,{children:[(0,n.jsx)(z.q7,{value:"all",children:"All Accounts"}),t.map(e=>(0,n.jsxs)(z.q7,{value:e.uniqueId,children:[e.name," — ","GBP"===m.currency?"\xa3":(0,d.v)(0,m.currency).charAt(0),Number(e.balance).toFixed(2)]},e.id))]})]})]}),(0,n.jsx)(V.a,{className:W().timeRangeContainer,children:(0,n.jsx)(G.bL,{value:x,onValueChange:e=>C(e),children:(0,n.jsxs)(G.B8,{children:[(0,n.jsx)(G.l9,{value:"day",children:"Day"}),(0,n.jsx)(G.l9,{value:"month",children:"Month"}),(0,n.jsx)(G.l9,{value:"year",children:"Year"})]})})})]}),(0,n.jsx)("main",{className:W().main,children:0===P.length?(0,n.jsx)("div",{className:W().emptyState,children:(0,n.jsxs)("div",{className:W().emptyStateContent,children:[(0,n.jsx)("div",{className:W().emptyStateIcon,children:"\uD83D\uDCCA"}),(0,n.jsx)("h3",{className:W().emptyStateTitle,children:"No data to analyze yet"}),(0,n.jsx)("p",{className:W().emptyStateText,children:"Add some transactions to see analytics and insights"})]})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O.x,{id:"stats-cards",className:W().statsGrid,children:(0,n.jsx)(N,{totalIncome:Z,totalExpense:q,netBalance:Z-q,incomeTransactionCount:Y.filter(e=>"income"===e.type).length,expenseTransactionCount:Y.filter(e=>"expense"===e.type).length,currency:m.currency})}),(0,n.jsx)(O.x,{id:"expense-breakdown",className:W().analyticsCard,children:(0,n.jsx)(E,{title:"\uD83D\uDCCA Expense Breakdown",description:"Visual breakdown of your spending by category",children:0===U.length?(0,n.jsxs)("div",{className:W().noData,children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCC8"}),"No expense data for this period"]}):(0,n.jsx)("div",{className:W().chartContainer,children:(0,n.jsx)(b,{data:U.slice(0,6),categoryConfig:F,currency:m.currency})})})}),(0,n.jsx)(O.x,{id:"daily-comparison",className:W().analyticsCard,children:(0,n.jsx)(E,{title:"\uD83D\uDCC8 Daily Expense Comparison",description:"Compare daily expenses for the entire month between current and previous month",children:0===K.currentMonth.expense&&0===K.prevMonth.expense?(0,n.jsxs)("div",{className:W().noData,children:[(0,n.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCC8"}),"No expense data for comparison"]}):(0,n.jsxs)("div",{className:W().chartContainer,children:[(0,n.jsx)(v.E,{data:K,currency:m.currency,transactions:P}),(0,n.jsx)("div",{className:W().comparisonStats,children:(0,n.jsx)(M,{currentMonthAverage:K.currentMonth.dailyAverage,prevMonthAverage:K.prevMonth.dailyAverage,currentMonthName:K.currentMonth.name,prevMonthName:K.prevMonth.name,currency:m.currency})})]})})}),(0,n.jsx)(O.x,{id:"spending-category",className:W().analyticsCard,children:(0,n.jsx)(E,{title:"\uD83C\uDFF7️ Spending by Category",description:"Detailed breakdown of your expenses across different categories",children:(0,n.jsx)(S,{categoryData:U,currency:m.currency,customCategories:D,onAddCategory:async(e,t)=>{let a=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"],n=a[Math.floor(Math.random()*a.length)];await L(e,t,n)},onDeleteCategory:I})})}),(0,n.jsx)(O.x,{id:"recurring-payments",className:W().analyticsCard,children:(0,n.jsx)(E,{title:"\uD83D\uDD04 Recurring Payments",description:"Track your recurring expenses and upcoming payment predictions",children:(0,n.jsx)(j.Z,{transactions:P,currency:m.currency,maxItems:5,showSeeMore:!1})})}),(0,n.jsx)(O.x,{id:"budget-overview",className:W().analyticsCard,children:(0,n.jsx)(E,{title:"\uD83D\uDCB0 Monthly Budget Overview",description:"Track your progress against your monthly spending budget (current month)",children:(0,n.jsx)(A,{monthlyExpense:J,totalBudgetLimit:m.totalBudgetLimit,currency:m.currency})})})]})})]}),(0,n.jsx)(i.A,{buttonColor:"#222222",opacity:50})]})}}},e=>{e.O(0,[8334,6715,9386,7437,1888,8837,1675,6830,5859,4440,1724,1967,587,1902,7358],()=>e(e.s=63461)),_N_E=e.O()}]);